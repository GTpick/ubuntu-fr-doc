{{tag>imprimante}}

====== Interface Web de CUPS ======

Si l'interface graphique de votre variante d'Ubuntu ne peut marcher correctement et que vous avez une imprimante sur port parallèle ou série ou même si vous êtes simplement très curieux, cette page vous explique comment paramétrer une imprimante via l'interface "web" de configuration de CUPS votre imprimante, vous allez voir, cette interface est hors du commun, mais simple et puissante !

copie d'écran de l'interface web de CUPS :

[[http://www.jouvinio.net/wiki/index.php/Fichier:Page_Administration_Cups.png]]


=====Installation=====


Si jamais cups n'est pas installé sur votre machine, [[:tutoriel:comment_installer_un_paquet|installez les paquets]]  **[[apt://cups,cups-client|cups et cups-client]]**.
===== Configuration =====

Un simple utilisateur n'a, par défaut, pas le droit d'installer et de manipuler les imprimantes locales. Afin de rendre cette opération possible, il faut ajouter votre login au groupe **lpadmin** : <code>sudo adduser $USER lpadmin</code>

Relancez ensuite cupsys pour prendre en compte ce changement: <code>sudo service cups restart</code>

===== Accéder à l'interface Web =====

Un simple navigateur Internet est maintenant suffisant pour configurer et gérer votre imprimante, il suffit de se connecter à l'adresse suivante : http://localhost:631/. C'est l'adresse de l'interface web de CUPS, éventuellement protégée par votre mot de passe (login et password habituels, évitez d'utiliser le mot de passe de "root" !).
Si l'authentification échoue, il peut être efficace de redémarrer cups par :
  sudo killall cupsd

==== Ajouter une imprimante ====

Pour ajouter une imprimante, nous allons cliquer sur //Ajouter une imprimante //. Entrez votre nom d'utilisateur et votre mot de passe, puis suivez les instructions.
==== Gérer les imprimantes ====
Allez dans l'onglet //Imprimantes// et cliquez sur l'imprimante dont vous souhaitez modifier les paramètres.

===== Configuration via le fichier=====
Le fichier de configuration à créer //en root// se nomme **printers.conf** et ce place dans **/etc/cups/**

Exemple pour l'imprimante HP Photosmart C4100 installée sur le PC 192.168.1.2

**Le fichier de l'hôte 192.168.1.2**
<code bash># Printer configuration file for CUPS v1.4.3
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
<Printer Photosmart-C4100-series-2>
Info HP Photosmart C4100 series
Location Principal
MakeModel HP Photosmart c4100 Series hpijs, 3.10.2rc1.9
DeviceURI hp:/usb/Photosmart_C4100_series?serial=MY****12P6***J7
State Idle
StateTime 1303903433
Type 8425500
Filter application/vnd.cups-raw 0 -
Filter application/vnd.cups-postscript 100 foomatic-rip-hplip
Filter application/vnd.cups-pdf 0 foomatic-rip-hplip
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy retry-job
</Printer></code>


Pour qu'un autre poste puisse partager cet imprimante, il suffit de mettre dans le fichier printers.conf de cet utilisateur, par exemple 192.168.1.5, l'option "Shared yes" :
<code bash># Printer configuration file for CUPS v1.4.3
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
<DefaultPrinter Photosmart_C4100_series>
AuthInfoRequired none
Info Photosmart_C4100_series
Location Photosmart_C4100_series
MakeModel HP Photosmart c4100 Series hpijs, 3.10.2
DeviceURI http://192.168.1.2:631/printers/Photosmart-C4100-series-2
State Idle
StateTime 1302521428
Type 8425500
Filter application/vnd.cups-raw 0 -
Filter application/vnd.cups-postscript 100 foomatic-rip
Filter application/vnd.cups-pdf 0 foomatic-rip
Accepting Yes
Shared No
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy retry-job
</Printer></code>

== Redémarrer CUPS ==
<code bash>sudo /etc/init.d/cups restart</code>
===== Imprimante bluetooth =====

Consulter la page dédiée [[Imprimantes Bluetooth]].

===== Problèmes et solutions =====

==== Imprimante en pause ====

En cas de problème d'impression car l'imprimante est dite « en pause », aller dans l'[[http://localhost:631|interface de gestion de CUPS]], cliquer sur « //Administration > Gérer les imprimantes// » puis sur l'imprimante problématique, et sélectionner « //démarrer l'imprimante// » dans le menu « //Maintenance// ».

==== Imprimante réseau ====
Depuis Ubuntu 12.04, certaines imprimantes réseau ne fonctionnent plus. Elles indiquent l'erreur : "Print File was Not accepted".

Heureusement, Till Kamppeter a pu apporter une [[https://bugs.launchpad.net/ubuntu/+source/cups/+bug/945028/comments/56|solution]] à ce problème.
=====Voir aussi=====

[[:gtklp|Interface graphique à CUPS]].

----

//Contributeurs : [[utilisateurs:Calaereb|Calaereb]], [[utilisateurs:Id2ndR]], [[utilisateurs:ymulleneers]], [[:utilisateurs:david96|david96]]//